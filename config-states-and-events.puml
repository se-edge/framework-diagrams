@startuml
legend top left
  ğŸ—² is a system telemetry
endlegend

start
-> Twin update;
:ğŸ—² Configuration in progress;
repeat
  :download file;
  :check intÃ©grity;
  :copy file to destination;
repeat while (another file to process?)

if (error occured ?) then (no)
  : Update reported twin with newly applied package id;
else (yes)
  : Make sure there is no package id in reporteed twin;
  :ğŸ—² Configuration failed;
endif
stop
@enduml